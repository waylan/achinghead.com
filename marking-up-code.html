<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>Marking up Code - achinghead.com</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://achinghead.com/marking-up-code.html">

        <meta name="author" content="Waylan Limberg" />
        <meta name="keywords" content="html,syntax highlighting" />
        <meta name="description" content="There are as many different ways to mark up a code fragment in HTML as there are highlighting tools. Some use pre tags, some use ‘code’ tags, some use both, and then there are those that use other elements like div tags. Who’s right? The HTML5 specification provides some very clear direction on the matter…" />

    <!-- Enable latex plugin -->




    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://achinghead.com/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://achinghead.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://achinghead.com/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="http://achinghead.com/theme/css/style.css" type="text/css"/>

        <link href="http://achinghead.com/atom.xml" type="application/atom+xml" rel="alternate"
              title="achinghead.com ATOM Feed"/>



</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://achinghead.com/" class="navbar-brand">
achinghead.com            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://achinghead.com/pages/about.html">
                             About
                          </a></li>
                         <li><a href="http://achinghead.com/pages/projects.html">
                             Projects
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://achinghead.com/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://achinghead.com/marking-up-code.html"
                       rel="bookmark"
                       title="Permalink to Marking up Code">
                        Marking up Code
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-05-31T00:00:00-04:00"> May 31, 2012</time>
    </span>






<span class="label label-default">Tags</span>
	<a href="http://achinghead.com/tag/html.html">html</a>
        /
	<a href="http://achinghead.com/tag/syntax-highlighting.html">syntax highlighting</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>In reviewing syntax highlighters, I have observed that there are as many
different ways to mark up a code fragment in HTML as there are highlighting
tools. In other words, every tool seems to define a different syntax. Some use
<code>pre</code> tags, some use &lsquo;code&rsquo; tags, some use both, and then there are those that
use other elements like <code>div</code> tags.</p>
<p>The most obvious problem with this is that if you want to switch to a different
tool, you need to change all your old HTML documents to use the new syntax;
which could be a real time suck. Sure the process could be automated, but
writing a bug-free script could become just as painful as making the changes
manually.</p>
<p>Another, perhaps less obvious issue is the semantics of the markup used. Does
the markup accurately convey what the content actually is? For example, many
people use <code>pre</code> tags around code. Of course, the <code>pre</code> element is specifically
for &ldquo;preformatted text&rdquo; which code often is. However, some have argued that
preformatted text is presentation, not semantics and therefore not the best
choice. Others have argued that the <code>code</code> element does nothing more than a
<code>span</code> under a different name and is therefore pointless. Some seem to subscribe
to both arguments and use other elements such as a <code>div</code> with a predefined class
of their choosing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The content of this post was originally authored in March of 2011. It was
then posted as a <a href="https://gist.github.com/waylan/2844867">Gist</a> on May 31,
2012. While the post wasn&rsquo;t added to this site until 2014, the May 31, 2012
creation date has been preserved.</p>
</div>
<p>Who&rsquo;s right? Unfortunately, the HTML4 specification does little to clear up the
matter. Interestingly however, the working draft of the HTML5 specification
provides some very clear direction on the matter.</p>
<p>Let&rsquo;s look at the <a href="http://dev.w3.org/html5/spec/Overview.html#the-pre-element"><code>pre</code></a> element first. The basis definition of a <code>pre</code>
element is as follows:</p>
<blockquote>
<p>The <code>pre</code> element represents a block of preformatted text, in which structure
is represented by typographic conventions rather than by elements.</p>
</blockquote>
<p>Then, included in a list of example use cases in the specification is this item:</p>
<blockquote>
<ul>
<li>Including fragments of computer code, with structure indicated according to
  the conventions of that language.</li>
</ul>
</blockquote>
<p>There is an important theme in those two fragments of the Specification.
Sometimes, the structure of text is determined by typographic conventions, not
by HTML elements. More importantly, computer code is specifically mentioned as
fitting that mold. For an example, consider Python. Unlike many languages,
white-space is significant in Python code. The line breaks and indentation mean
something. However, a language like JavaScript does not require any white-space
for the computer to understand it. Curly brackets and other such characters
define the meaning of the text. Of course, for all but the simplest of
JavaScript fragments to be human readable, they still need to be presented with
white-space.</p>
<p>Admittedly, after a code fragment has been passing through a syntax highlighter,
its structure is now represented by HTML elements. That being the case,
highlighted code may no longer belong in a <code>pre</code> tag. However, before such a
tool is used the HTML5 specification makes it pretty clear that a <code>pre</code> tag is
the appropriate way to go.</p>
<p>Finally, note this comment in the specification:</p>
<blockquote>
<p>To represent a block of computer code, the <code>pre</code> element can be used with a
<code>code</code> element; &hellip;</p>
</blockquote>
<p>There are two things to note in that comment: (1) it is suggested that the <code>pre</code>
and <code>code</code> elements be used together, but (2) it is not a requirement (note the
use of &ldquo;can&rdquo; rather than &ldquo;must&rdquo; or &ldquo;shall&rdquo;), which begs the question; when do
you use one and when do you use both?</p>
<p>I think the <a href="http://dev.w3.org/html5/spec/Overview.html#the-code-element"><code>code</code></a> specification answers that for us. For starters:</p>
<blockquote>
<p>The <code>code</code> element represents a fragment of computer code. This could be an
XML element name, a filename, a computer program, or any other string that a
computer would recognize.</p>
</blockquote>
<p>Interestingly, the word &ldquo;represents&rdquo; in that text in the specification links to
this <a href="http://dev.w3.org/html5/spec/Overview.html#represents">explanation</a>:</p>
<blockquote>
<p>In the absence of style-layer rules to the contrary (e.g. author style
sheets), user agents are expected to render an element so that it conveys to
the user the meaning that the element <strong>represents</strong>, as described by this
specification.</p>
</blockquote>
<p>If the <code>code</code> element is to &ldquo;represent&rdquo; &lsquo;any string that a computer would
recognize&rsquo; then it should be obvious that the <code>code</code> element is always required
when representing computer code. The <code>pre</code> element would only be used when that
computer code is &ldquo;represented by typographic conventions rather than by
elements.&rdquo;</p>
<p>Perhaps the examples in the specification will clear this up.</p>
<blockquote>
<p>The following example shows how the element can be used in a paragraph to mark
up element names and computer code, including punctuation.</p>
<div class="highlight"><pre><span class="nt">&lt;p&gt;</span>The <span class="nt">&lt;code&gt;</span>code<span class="nt">&lt;/code&gt;</span> element represents a fragment of computer
code.<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;p&gt;</span>When you call the <span class="nt">&lt;code&gt;</span>activate()<span class="nt">&lt;/code&gt;</span> method on the
<span class="nt">&lt;code&gt;</span>robotSnowman<span class="nt">&lt;/code&gt;</span> object, the eyes glow.<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;p&gt;</span>The example below uses the <span class="nt">&lt;code&gt;</span>begin<span class="nt">&lt;/code&gt;</span> keyword to indicate
the start of a statement block. It is paired with an <span class="nt">&lt;code&gt;</span>end<span class="nt">&lt;/code&gt;</span>
keyword, which is followed by the <span class="nt">&lt;code&gt;</span>.<span class="nt">&lt;/code&gt;</span> punctuation character
(full stop) to indicate the end of the program.<span class="nt">&lt;/p&gt;</span>
</pre></div>


</blockquote>
<p>Here we find <code>code</code> tags without <code>pre</code> tags. Of course, each of these <code>code</code>
fragments do not require typographical conventions (white-space) to represent
their meaning. So, when the specification indicates that both <code>pre</code> and <code>code</code>
tags are not required for all code fragments, this is what is being referred to.</p>
<blockquote>
<p>The following example shows how a block of code could be marked up using the
pre and code elements.</p>
<div class="highlight"><pre><span class="nt">&lt;pre&gt;&lt;code</span> <span class="na">class=</span><span class="s">&quot;language-pascal&quot;</span><span class="nt">&gt;</span>var i: Integer;
begin
   i := 1;
end.<span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</pre></div>


<p>A class is used in that example to indicate the language used.</p>
</blockquote>
<p>Here we find a code block which contains line breaks and indentation -
&ldquo;typographical conventions.&rdquo; I think it is safe to assume that both the <code>pre</code>
and <code>code</code> elements are required in this case. However, as previously mentioned,
after passing the block through a syntax highlighter, the <code>pre</code> tag might be
swapped out for a <code>div</code>, as the code will now be represented by elements.
Regardless, each individual fragment should be wrapped in a <code>code</code> tag as it is
a &ldquo;string that a computer would recognize.&rdquo;</p>
<p>Finally, did you notice that a class was used in that last example to indicate
the language of the code contained therein? The specification expounds on this
like so:</p>
<blockquote>
<p>Although there is no formal way to indicate the language of computer code
being marked up, authors who wish to mark code elements with the language
used, e.g. so that syntax highlighting scripts can use the right rules, may do
so by adding a class prefixed with &ldquo;language-&rdquo; to the element.</p>
</blockquote>
<p>There are a number of interesting things to take away from that one sentence.
First, the explicitly stated use-case for indicating the language would be to
give instructions to syntax highlighting tools. The next logical step would be
that such tools would want to work out-of-the-box with the example markup
provided in the specification. That said, the specification specifically admits
that this is not a formal rule. Therefore, minor deviations can be expected.
Perhaps a specific tool adds additional features like optional line numbering.
As the specification doesn&rsquo;t mention line numbering, that is up to the tool&rsquo;s
implementer to work out. However, in whatever way that it is implemented, it
shouldn&rsquo;t effect any competing tools ability to implement the basic feature of
identifying the language used.</p>
<p>It should also be noted that the specification is careful to point out that the
convention of prefixing &ldquo;language-&rdquo; to the class of the element is only a
suggestion (note the expression: &ldquo;&hellip;may do so by&hellip;&rdquo;), albeit a reasonable one.
We wouldn&rsquo;t want to invent some invalid attributes of our own, but we need a way
to identify which class (if there are more than one) specifically identifies the
language of the code. Admittedly, using the prefix &ldquo;lang-&rdquo; would be just as
effective. But for consistency&rsquo;s sake, I&rsquo;d prefer to stick with the suggested
model. Others are free to disagree on this point.</p>
<p>Speaking of disagreements, I&rsquo;ve seen arguments on mailing lists about which
element the language identifying class should be set on. Specifically, a class
set on a parent element provides a styling hook for either the parent
(<code>parent.class</code>) or the child element (<code>parent.class child</code>). However, when the
class is set on the child element, there is no easy way to specify the parent
element from CSS. With libraries that use CSS style selectors (like jQuery),
this same problem can translate to scripts as well. Even though it&rsquo;s not too
hard to obtain the parent of an element in JavaScript, some people have argued
adamantly that the language identifying class should be set on the parent <code>pre</code>
tag.</p>
<p>So, why then, does the HTML5 Specification suggest that the class be set on the
child <code>code</code> tag? I don&rsquo;t have first-hand knowledge of what influenced the
specification authors, but keep in mind that a language designation is meta-data
specific to &ldquo;code.&rdquo; A <code>pre</code> element can contain any variety of non-code content
(ASCII art, poems, etc.), but a <code>code</code> element will always contain code, which
will presumably be identifiable with a specific language. Therefore, setting the
language class on the <code>code</code> tag is more semantically correct.</p>
<p>By way of example, how should this snippet<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> be interpreted?</p>
<div class="highlight"><pre><span class="nt">&lt;pre</span> <span class="na">class=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
.......... __o
............\<span class="err">&lt;</span>,
.........() / ()
<span class="nt">&lt;/pre&gt;</span>
</pre></div>


<p>We don&rsquo;t have any &ldquo;code&rdquo; so no <code>code</code> tag is used. However, some syntax
highlighting tools will try to process the ASCII art simply based on the fact
that a class was set on the <code>pre</code> element. Do you see the problem? Without the
<code>code</code> element, the script should recognize that this <code>pre</code> element does not
contain code. Forcing the class on the <code>code</code> element eliminates this
misunderstanding.</p>
<p>Yes, it is evident that the HTML5 Specification authors gave some serious
thought to the semantics of marking up code in an HTML document. Even of you&rsquo;re
not using HTML5, the basic guidelines still apply and should be a baseline for
all syntax highlighting script authors to strive for.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>That ASCII art was taken from the signature line of David Larson on the
<a href="http://groups.google.com/group/framebuilders">Framebuilders list</a>. I do not
know whether David is the originator of the artwork.&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">



                <li class="list-group-item"><a href="http://achinghead.com/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group " id="tags">
                        <li class="list-group-item tag-1">
                            <a href="http://achinghead.com/tag/markdown.html">
                                markdown
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://achinghead.com/tag/python.html">
                                python
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://achinghead.com/tag/linux.html">
                                linux
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://achinghead.com/tag/ubuntu.html">
                                Ubuntu
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://achinghead.com/tag/django.html">
                                django
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://achinghead.com/tag/virtualbox.html">
                                VirtualBox
                            </a>
                        </li>
                        <li class="list-group-item tag-3">
                            <a href="http://achinghead.com/tag/syntax-highlighting.html">
                                syntax highlighting
                            </a>
                        </li>
                        <li class="list-group-item tag-3">
                            <a href="http://achinghead.com/tag/prostetics.html">
                                prostetics
                            </a>
                        </li>
                        <li class="list-group-item tag-3">
                            <a href="http://achinghead.com/tag/clipless-glove.html">
                                Clipless Glove
                            </a>
                        </li>
                        <li class="list-group-item tag-3">
                            <a href="http://achinghead.com/tag/html.html">
                                html
                            </a>
                        </li>
                        <li class="list-group-item tag-3">
                            <a href="http://achinghead.com/tag/bicycles.html">
                                bicycles
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/hardware.html">
                                hardware
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/git.html">
                                git
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/automobile.html">
                                automobile
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/testing.html">
                                testing
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/electronics.html">
                                electronics
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/python-nose.html">
                                Python Nose
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/hacks.html">
                                hacks
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/anti-spam.html">
                                anti-spam
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://achinghead.com/tag/css.html">
                                css
                            </a>
                        </li>
                    </ul>
                </li>    



        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Waylan Limberg
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://achinghead.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://achinghead.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://achinghead.com/theme/js/respond.min.js"></script>

</body>
</html>